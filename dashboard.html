<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Meus Alertas - Radar Florestal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
      rel="stylesheet"
    />
    <link rel="icon" type="image/x-icon" href="assets/img/faviconn.svg">
  </head>
  <body class="min-h-screen bg-gray-50 flex">
    <!-- Backdrop Sidebar -->
    <div
      id="sidebarBackdrop"
      class="fixed inset-0 bg-black/50 z-40 hidden lg:hidden"
    ></div>

    <!-- Sidebar -->
    <aside
      id="sidebar"
      class="fixed lg:sticky top-0 left-0 h-screen w-64 bg-gradient-to-b from-green-600 to-green-700 z-50 transform -translate-x-full lg:translate-x-0 transition-transform duration-300"
    >
      <div class="p-6 border-b border-green-400/20">
        <div class="flex items-center justify-between">
          <h2 class="text-xl font-bold text-white">Radar Florestal</h2>
          <button id="closeSidebar" class="lg:hidden text-white">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <p id="userName" class="text-white/80 text-sm mt-2">Olá, Usuário</p>
      </div>
      <nav class="flex-1 p-6">
        <ul class="space-y-2" id="menuItems">
          <li>
            <button
              class="w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left text-white/70 hover:bg-white/10"
              data-section="desmatamento"
            >
              <i class="fas fa-chart-bar w-5"></i> Desmatamento
            </button>
          </li>
          <li>
            <button
              class="w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left text-white/70 hover:bg-white/10"
              data-section="queimadas"
            >
              <i class="fas fa-fire w-5"></i> Queimadas
            </button>
          </li>
          <li>
            <button
              class="w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left text-white/70 hover:bg-white/10"
              data-section="mineracao"
            >
              <i class="fas fa-mountain w-5"></i> Mineração
            </button>
          </li>
          <li>
            <button
              class="w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left text-white/70 hover:bg-white/10"
              data-section="fauna"
            >
              <i class="fas fa-hippo w-5"></i> Fauna
            </button>
          </li>
          <li class="pt-3 border-t border-white/20"></li>
          <li>
            <a
              href="/radar-florestal.io/forum.html"
              class="w-full flex items-center gap-3 px-4 py-3 rounded-lg text-white/70 hover:bg-white/10"
            >
              <i class="fas fa-comments w-5"></i> Fórum
            </a>
          </li>
          <li>
            <button
              id="meusAlertasBtn"
              class="w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left text-white/70 hover:bg-white/10"
            >
              <i class="fas fa-bell w-5"></i> Meus Alertas
            </button>
          </li>
        </ul>
      </nav>
      <div class="p-6 border-t border-green-400/20 space-y-2">
        <button
          id="profileBtn"
          class="w-full flex items-center gap-2 bg-transparent border border-white/20 text-white hover:bg-white/10 px-3 py-2 rounded-lg"
        >
          <i class="fas fa-user"></i> Perfil
        </button>
        <button
          id="logoutBtn"
          class="w-full flex items-center gap-2 bg-transparent border border-white/20 text-white hover:bg-white/10 px-3 py-2 rounded-lg"
        >
          <i class="fas fa-sign-out-alt"></i> Sair
        </button>
      </div>
    </aside>

    <!-- Main -->
    <main class="flex-1 flex flex-col ml-0">
      <header
        class="bg-white shadow px-6 py-4 border-b border-gray-200 flex items-center justify-between"
      >
        <button id="openSidebar" class="lg:hidden">
          <i class="fas fa-bars w-6 h-6"></i>
        </button>
        <h1 class="text-xl font-semibold text-gray-800 hidden lg:block">
          Meus Alertas
        </h1>
        <div class="flex items-center gap-4">
          <span id="userEmail" class="text-sm text-gray-500 hidden sm:block"
            >usuario@exemplo.com</span
          >
          <button
            id="profileTopBtn"
            class="bg-gray-100 p-2 rounded-lg hover:bg-gray-200"
          >
            <i class="fas fa-user"></i>
          </button>
        </div>
      </header>

      <div id="content" class="flex-1 p-6 overflow-auto">
        <!-- Conteúdo principal da página -->
        <div class="bg-white rounded-xl shadow p-6">
          <div class="flex justify-between items-center mb-6">
            <h2 class="text-xl font-semibold">Seus Alertas</h2>
            <button
              id="addAlertBtn"
              class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700"
            >
              <i class="fas fa-plus mr-2"></i>Novo Alerta
            </button>
          </div>
          <div id="alertList" class="space-y-4"></div>
        </div>
      </div>
    </main>

    <!-- Modal -->
    <div
      id="alertModal"
      class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden"
    >
      <div class="bg-white rounded-xl shadow-lg w-full max-w-md p-6 space-y-4 mx-1">
        <h3 id="modalTitle" class="text-lg font-semibold text-gray-800">
          Título
        </h3>
        <input
          id="modalInput"
          type="text"
          class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-600"
          placeholder=""
        />
        <div class="flex justify-end gap-2">
          <button
            id="modalCancel"
            class="px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300"
          >
            Cancelar
          </button>
          <button
            id="modalConfirm"
            class="px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700"
          >
            Confirmar
          </button>
        </div>
      </div>
    </div>

    <script>
      // Usuário e modal
      const user = { name: "João Silva", email: "joao@example.com" };
      document.getElementById("userName").textContent = `Olá, ${user.name}`;
      document.getElementById("userEmail").textContent = user.email;

      const sidebar = document.getElementById("sidebar");
      const sidebarBackdrop = document.getElementById("sidebarBackdrop");

      document.getElementById("openSidebar").addEventListener("click", () => {
        sidebar.classList.remove("-translate-x-full");
        sidebarBackdrop.classList.remove("hidden");
      });
      document.getElementById("closeSidebar").addEventListener("click", () => {
        sidebar.classList.add("-translate-x-full");
        sidebarBackdrop.classList.add("hidden");
      });
      sidebarBackdrop.addEventListener("click", () => {
        sidebar.classList.add("-translate-x-full");
        sidebarBackdrop.classList.add("hidden");
      });

      document.getElementById("profileBtn").addEventListener("click", () => {
        window.location.href = "/radar-florestal.io/profile.html";
      });
      document.getElementById("profileTopBtn").addEventListener("click", () => {
        window.location.href = "/radar-florestal.io/profile.html";
      });
      document.getElementById("logoutBtn").addEventListener("click", () => {
        window.location.href = "/radar-florestal.io";
      });
      document.getElementById("meusAlertasBtn").addEventListener("click", () => {
        window.location.href = "/radar-florestal.io/my-alerts.html";
      });

      // Modal
      const modal = document.getElementById("alertModal");
      const modalTitle = document.getElementById("modalTitle");
      const modalInput = document.getElementById("modalInput");
      const modalCancel = document.getElementById("modalCancel");
      const modalConfirm = document.getElementById("modalConfirm");
      let modalCallback = null;

      function openModal(title, defaultValue = "", callback) {
        modalTitle.textContent = title;
        modalInput.value = defaultValue;
        modal.classList.remove("hidden");
        modalCallback = callback;
        modalInput.focus();
      }

      modalCancel.addEventListener("click", () => modal.classList.add("hidden"));
      modalConfirm.addEventListener("click", () => {
        modal.classList.add("hidden");
        if (modalCallback) modalCallback(modalInput.value);
      });

      // Alertas
      let meusAlertas = [
        { titulo: "Desmatamento em área próxima", data: "10/09/2025" },
      ];
      const alertList = document.getElementById("alertList");

      function renderAlertList() {
        alertList.innerHTML = meusAlertas
          .map(
            (alerta, index) => `
          <div class="p-4 border rounded-lg flex justify-between items-center bg-gray-50">
            <div>
              <p class="font-medium text-gray-700">${alerta.titulo}</p>
              <p class="text-sm text-gray-500">Criado em ${alerta.data}</p>
            </div>
            <div class="flex gap-2">
              <button class="editAlert px-3 py-1 text-sm bg-blue-100 text-blue-600 rounded hover:bg-blue-200" data-index="${index}">
                <i class="fas fa-edit"></i> Editar
              </button>
              <button class="deleteAlert px-3 py-1 text-sm bg-red-100 text-red-600 rounded hover:bg-red-200" data-index="${index}">
                <i class="fas fa-trash"></i> Excluir
              </button>
            </div>
          </div>
        `
          )
          .join("");

        // Eventos dos botões
        document.querySelectorAll(".editAlert").forEach((btn) => {
          btn.addEventListener("click", () => {
            const idx = btn.dataset.index;
            openModal("Editar alerta:", meusAlertas[idx].titulo, (value) => {
              if (value) {
                meusAlertas[idx].titulo = value;
                renderAlertList();
              }
            });
          });
        });

        document.querySelectorAll(".deleteAlert").forEach((btn) => {
          btn.addEventListener("click", () => {
            const idx = btn.dataset.index;
            openModal(
              "Deseja realmente excluir este alerta?",
              "Digite 'SIM' para confirmar",
              (value) => {
                if (value.toUpperCase() === "SIM") {
                  meusAlertas.splice(idx, 1);
                  renderAlertList();
                }
              }
            );
          });
        });
      }

      document.getElementById("addAlertBtn").addEventListener("click", () => {
        openModal("Digite o título do alerta:", "", (value) => {
          if (value) {
            meusAlertas.push({
              titulo: value,
              data: new Date().toLocaleDateString("pt-BR"),
            });
            renderAlertList();
          }
        });
      });

      // Inicializa a lista
      renderAlertList();
    </script>
  </body>
</html>
